レンタルDVD店の貸出用DVD管理システムを例に、FPをより深く学んでいきましょう。
★menu.png
このシステムは、店舗でレンタルするDVDの種類や枚数を管理するものです。
システムの機能として、DVDの新規登録や検索、情報印刷などが行えます。
システムの概要を理解してもらうために、機能の一部を抜粋して説明します。
★sinkitouroku.png
新規登録は、新たに貸出用DVDを登録する処理です。
画面にDVD番号、タイトル、メーカー、ジャンル、枚数を入力し、登録ボタンを押す事で新しいDVDを登録します。
★kensaku.png
DVDの検索は、貸出用DVDに対し検索をかけます。
画面にタイトル、メーカー、ジャンルを入力し、検索ボタンを押す事でDVD情報とDVD明細情報を参照し検索を行います。
★kensakukekka.png
検索結果は図のように表示されます。
枚数は該当するDVDの枚数であり、貸出可能枚数はDVD明細情報のうち貸出先利用者番号が空であるレコードの数です。
★insatu.png
情報印刷は、貸出用DVDの情報を印刷します。
画面のようなチェック画面が表示され、印刷するボタンを押すと印刷が行われます。
★chouhyou.png
印刷される帳票には、DVD情報を参照して得られたDVD番号、タイトル、メーカー、ジャンル、蔵枚数、印刷日が記載されます。
★data.png
data.pngは具体例の方が良さそう
管理するDVDの情報は「DVD情報」と「DVD明細情報」の2つの形式で扱われます。
DVD情報には主キーとなるDVD番号、タイトル、メーカー、ジャンル、枚数が含まれます。
DVD明細情報には主キーとなるDVD番号と枝番、貸出先利用者番号、貸出日が含まれます。
このシステムにおける、FPの値をこれから求めます。
まず、DFについて。
DFとはデータのまとまり、簡単に言えばデータベースの事を指します。
今回のシステムにおいてはDVD情報およびDVD明細情報が当てはまります。
★DFtable.png
DFのFPはDET(取り扱われる項目の数)と種類(更新されるか否か)によって定まります。
たとえばDETが3の更新されるDFのFPは5と定まり、DETが8の更新されないDFのFPは5と定まります。
今回のDVD情報は項目としてDVD番号、タイトル、メーカー、ジャンル、枚数の5つの項目を持っています。
そのため、DVD情報というDFのDETは5となります。
☆DVD情報
☆DET…5
これにDVD情報の種類が求まればFPが算出できるのですが、DFが更新されるか否かは更新処理が行われているかどうかを確認しなければなりません。
そのためには、TFの計測を待つ必要があります。
同様に、DVD明細情報においてもDETは4となりますが、種類についてはTFの計測後の判断となります。
では、TFのFP計測に移りましょう。
★TFtable.png
TFのFPはDET(入出力項目の数)、種類(更新か出力か照会か)、FTR(処理に関わるDFの数)の三つによって定まります。
たとえばDETが3、FTRが2の更新TFのFPは5と定まり、DETが8、FTPが1の出力TFのFPは5と定まります。
FP計測においては、それらの要素を各処理から判断していきます。
まず、新規登録処理について。
★sinkitouroku.png
☆新規登録
新規登録は、新たに貸出用DVDを登録する処理です。
画面にDVD番号、タイトル、メーカー、ジャンル、枚数を入力し、登録ボタンを押す事で新たなDVDが登録されます。
この時、DVD情報におけるタイトル、メーカー、ジャンル、枚数が更新されます。
また、DVD一枚一枚に枝番が振られるため、DVD明細情報の枝番が更新されます。
そのため、新規登録処理によってDVD情報とDVD明細情報、二つのDFが更新されたと言えます。
このようにDFを更新する処理の事をEI(外部入力)と呼びます。
☆種類…EI
また、今回の処理において入力項目としてDVD番号、タイトル、メーカー、ジャンル、枚数の4項目が入力されています。
このように入出力される項目の数の事をDETと呼び、TFのFP計測の要因となります。
☆DET…4
最後に、新規登録はDVD情報とDVD明細情報の二つのDFを更新しています。
これはつまり、新規登録というTFに二つのDFが関わっている事を表しており、このように処理に関わるDFの数の事をFTRと呼びます。
☆FTR…2
★TFtable.png
ここまででTFのFP計測に必要なDET・FTR・種類の情報が揃ったため、先程の表に照らし合わせる事で新規登録というTFのFPが6であると分かります。
同様に検索処理についてもFPを計測します。
☆検索
★kensaku.png
DVDの検索は、貸出用DVDに対し検索をかけます。
画面にタイトル、メーカー、ジャンルを入力し、検索ボタンを押す事でDVD情報とDVD明細情報を参照し検索を行います。
★kensakukekka.png
検索結果は図のように表示されます。
蔵枚数は該当するDVDの枚数であり、貸出可能枚数はDVD明細情報のうち貸出先利用者番号が空であるレコードの数です。
この処理において、タイトル・メーカー・ジャンルが入力され、DVD番号・タイトル・メーカー・ジャンル・蔵枚数・貸出可能枚数が出力されます。
そのため、検索処理のDET(入出力項目の数)は6となります。入力と出力で重複が存在した場合は一つとしてカウントすることに注意です。
☆DET…6
また、DVD情報とDVD明細情報を参照して検索を行っているため、FTR(処理に関わるTF)は2となります。
☆FTR…2
最後に種類なのですが、この処理においてDFは更新されないため、検索処理はEI(外部入力)ではありません。
一方で、貸出可能枚数を出力する際、この項目はDFには含まれておらず、「DVD明細情報のうち貸出先利用者番号が空であるレコードを数える」という演算処理を行う事で求められます。
このように「何らかの演算処理を伴う出力処理」の事をEO(外部出力)と呼びます。
☆種類…EO
★TFtable.png
こうしてTFの計測に必要な要素が出揃ったため、表から検索というTFのFPが8だと導き出すことができます。
最後に情報印刷についてです。
★insatu.png
情報印刷は、貸出用DVDの情報を印刷します。
画面のようなチェック画面が表示され、印刷するボタンを押すと印刷が行われます。
★chouhyou.png
印刷される帳票には、DVD情報を参照して得られたDVD番号、タイトル、メーカー、ジャンル、蔵枚数、印刷日が記載されます。
この処理において、DVD番号・タイトル・メーカー・ジャンル・蔵枚数・印刷日が出力されます。
そのため、情報印刷処理のDET(入出力項目の数)は6となります。
☆DET…6
また、DVD情報を参照して印刷を行っているため、FTR(処理に関わるTF)は1となります。
☆FTR…1
最後に種類ですが、この処理においてDFは更新されないため、検索処理はEI(外部入力)ではありません。
また、検索処理のように演算処理を行っているわけでもないため、EO(外部出力)にも当てはまりません。
このように「演算処理を伴わない出力処理」の事をEQ(外部照会)と呼びます。
☆種類…EQ
★TFtable.png
こうしてTFの計測に必要な要素が出揃ったため、表から検索というTFのFPが8だと導き出すことができます。
このようにして、TFのFP計測は行われます。
そして、TFのFP計測が完了すると更新されるDFが判明します。
具体的には、新規登録においてDVD情報とDVD明細情報が更新されていたため、その二つのDFは更新されると分かります。
このようにTFによって更新されるDFの事をILF(内部論理ファイル)と呼びます。
DVD情報のDETは6、DVD明細情報のDETは6だったため、表に照らし合わせる事で各DFのFPがそれぞれ6と7である事が分かります。
このような流れで、DFとTFのFPが計測でき、これらを全て足し合わせたものがそのシステムにおけるFP、開発規模として扱われます。

